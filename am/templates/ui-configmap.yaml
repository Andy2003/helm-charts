{{- if .Values.ui.enabled -}}
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    app: {{ template "gravitee.name" . }}
    component: "{{ .Values.ui.name }}"
    chart: "{{ .Chart.Name }}-{{ .Chart.Version }}"
    heritage: {{ .Release.Service }}
    release: {{ .Release.Name }}
  name: {{ template "gravitee.ui.fullname" . }}
data:
  use-gzip: "true"
  gzip-level: "5"
  gzip-types: "*"
  constants.json: |
    {
      "portalTitle": "{{ .Values.ui.title }}",
      "baseURL": "https://{{ index .Values.api.ingress.hosts 0 }}{{ .Values.api.ingress.path }}",
      "authentication": {
        "domainId": "admin",
        "authorize": "https://{{ index .Values.api.ingress.hosts 0 }}/admin/authorize",
        "redirectUri": "https://{{ index .Values.ui.ingress.hosts 0 }}/login/callback",
        "logoutUri": "https://{{ index .Values.api.ingress.hosts 0 }}/admin/logout?target_url=https://{{ index .Values.ui.ingress.hosts 0 }}/logout/callback"
      }
    }
{{- end -}}